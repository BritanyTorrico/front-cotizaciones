(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0682c578"],{2016:function(e,t,a){"use strict";a("a8d6")},2532:function(e,t,a){"use strict";var n=a("23e7"),r=a("5a34"),i=a("1d80"),s=a("ab13");n({target:"String",proto:!0,forced:!s("includes")},{includes:function(e){return!!~String(i(this)).indexOf(r(e),arguments.length>1?arguments[1]:void 0)}})},"44e7":function(e,t,a){var n=a("861d"),r=a("c6b6"),i=a("b622"),s=i("match");e.exports=function(e){var t;return n(e)&&(void 0!==(t=e[s])?!!t:"RegExp"==r(e))}},"5a34":function(e,t,a){var n=a("44e7");e.exports=function(e){if(n(e))throw TypeError("The method doesn't accept regular expressions");return e}},"6d61":function(e,t,a){"use strict";a("d469")},"83a5":function(e,t,a){"use strict";a.r(t);var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return this.permisoUnidadDeGasto?a("div",{staticClass:"register"},[a("div",{staticClass:"register_container"},[a("RegistroUnidad",{staticClass:"register_unit"})],1)]):e._e()},r=[],i=a("5530"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"reg_unit"},[a("h2",{staticClass:"unit_title"},[e._v("Registrar Unidad de Gasto")]),e._m(0),a("form",{staticClass:"form_unitreg",attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[a("div",{staticClass:"form_section"},[a("div",{staticClass:"form_name"},[e._v("Unidad:")]),a("div",{staticClass:"form_input"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.unit.nombre_unidadgasto,expression:"unit.nombre_unidadgasto"}],class:e.$v.unit.nombre_unidadgasto.$invalid?"form_check-input-error":"form_check-input",attrs:{name:"nombreUnidad",id:"nombreUnidad",type:"text",maxlength:"30",required:"",placeholder:"Ingrese el nombre aquí"},domProps:{value:e.unit.nombre_unidadgasto},on:{input:function(t){t.target.composing||e.$set(e.unit,"nombre_unidadgasto",t.target.value)}}})]),e.$v.unit.nombre_unidadgasto.required?e._e():a("div",{staticClass:"form_check-error"},[e._v(" Campo obligatorio. ")])]),a("div",{staticClass:"form_section"},[a("div",{staticClass:"form_name"},[e._v("Encargado:")]),a("lista-desplegable",{class:e.$v.unit.encargado_unidad.$invalid?"form_check-input-error":"form_check-input",attrs:{nombreLista:"encargadoUnidad",lista:e.listaUsuarios,placeholder:"Seleccione un encargado",required:""},model:{value:e.unit.encargado_unidad,callback:function(t){e.$set(e.unit,"encargado_unidad",t)},expression:"unit.encargado_unidad"}}),e.$v.unit.encargado_unidad.required?e._e():a("div",{staticClass:"form_check-error"},[e._v(" Campo obligatorio. ")])],1),a("div",{staticClass:"form_section"},[a("div",{staticClass:"form_name"},[e._v("Descripción:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.unit.descripcion_unidadgasto,expression:"unit.descripcion_unidadgasto"}],class:e.$v.unit.descripcion_unidadgasto.$invalid?"form_check-input-error":"form_check-input",attrs:{name:"descripcionUnidad",cols:"50",rows:"10",maxlength:"1000",required:"",placeholder:"Ingrese una descripción de la unidad"},domProps:{value:e.unit.descripcion_unidadgasto},on:{input:function(t){t.target.composing||e.$set(e.unit,"descripcion_unidadgasto",t.target.value)}}}),e._v(" "),e.$v.unit.descripcion_unidadgasto.required?e._e():a("div",{staticClass:"form_check-error"},[e._v(" Campo obligatorio. ")])]),a("div",{staticClass:"unit_form_button"},[a("button",{staticClass:"form_button",class:e.$v.unit.$invalid?"button-disabled":"",attrs:{disabled:e.$v.unit.$invalid}},[a("div",{staticClass:"button_tag"},[e._v("Crear")])])])]),a("Alert",{ref:"alert"})],1)},o=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",[a("div",{staticClass:"form_desc"},[e._v("Ingrese los datos de la nueva unidad de gasto")])])}],c=a("b85c"),d=a("1da1"),u=(a("96cf"),a("caad"),a("2532"),a("a434"),a("b5ae")),l=a("98ab"),m=a("961c"),p=a("2f62"),g={name:"RegistroUnidad",computed:Object(i["a"])({},Object(p["c"])(["token"])),components:{Alert:l["a"],ListaDesplegable:m["a"]},data:function(){return{disabled:!1,unit:{nombre_unidadgasto:null,encargado_unidad:null,descripcion_unidadgasto:""},listaUsuarios:[]}},validations:{unit:{nombre_unidadgasto:{required:u["required"],maxLength:Object(u["maxLength"])(50)},encargado_unidad:{required:u["required"],maxLength:Object(u["maxLength"])(50)},descripcion_unidadgasto:{required:u["required"],maxLength:Object(u["maxLength"])(1e3)}}},methods:{getUsers:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var a,n,r,i,s,o,d,u,l;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("users?criterio=departamento&nombre=".concat(localStorage.getItem("depto")),{headers:{authorization:e.token}});case 2:a=t.sent.data,n=Object(c["a"])(a);try{for(n.s();!(r=n.n()).done;)i=r.value,e.listaUsuarios.push(i.nombres+" "+i.apellidos)}catch(m){n.e(m)}finally{n.f()}return t.next=7,e.$http.get("spendingUnit?type=name&departamento=".concat(localStorage.getItem("depto")),{headers:{authorization:e.token}});case 7:s=t.sent.data.datos,o=Object(c["a"])(s);try{for(o.s();!(d=o.n()).done;)u=d.value,e.listaUsuarios.includes(u.jefe_unidad)&&(l=e.listaUsuarios.indexOf(u.jefe_unidad),l>-1&&e.listaUsuarios.splice(l,1))}catch(m){o.e(m)}finally{o.f()}case 10:case"end":return t.stop()}}),t)})))()},submitForm:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$v.unit.$invalid){t.next=8;break}return t.next=4,e.sendData();case 4:e.alert("success","Unidad creada exitosamente"),window.setInterval(window.location.reload(),1e4),t.next=9;break;case 8:e.alert("warning","Rellene todos los datos correctamente");case 9:t.next=14;break;case 11:t.prev=11,t.t0=t["catch"](0),e.alert("warning",t.t0);case 14:case"end":return t.stop()}}),t,null,[[0,11]])})))()},sendData:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("spendingUnit",{nombre_departamento:localStorage.getItem("depto"),nombre_unidadgasto:e.unit.nombre_unidadgasto,Jefe_unidad:e.unit.encargado_unidad,descripcion_unidadgasto:e.unit.descripcion_unidadgasto},{headers:{authorization:e.token}});case 3:t.next=8;break;case 5:throw t.prev=5,t.t0=t["catch"](0),new Error("Esta unidad de gasto ya fué registrada");case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},alert:function(e,t){this.$refs.alert.showAlert(e,t)}},mounted:function(){this.getUsers();var e=[32,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,193,201,205,209,211,218,225,233,237,241,243,250],t=document.getElementById("nombreUnidad");t.addEventListener("keypress",(function(t){var a=t.charCode;if(0!=a){var n=e.includes(a);n||t.preventDefault()}}),!1)}},_=g,v=(a("c53e"),a("2877")),f=Object(v["a"])(_,s,o,!1,null,"5918bfde",null),h=f.exports,b={name:"RegistroUnidadGasto",components:{RegistroUnidad:h},computed:Object(i["a"])({},Object(p["c"])(["permisoUnidadDeGasto"])),mounted:function(){this.permisoUnidadDeGasto||this.$router.push("/")}},x=b,C=(a("2016"),Object(v["a"])(x,n,r,!1,null,"b9a0d092",null));t["default"]=C.exports},"961c":function(e,t,a){"use strict";var n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"list-container"},[a("select",{staticClass:"container__list",class:null===e.value?"container-list-placeholder":"",attrs:{required:""},on:{input:function(t){return e.$emit("input",t.target.value)}}},[a("option",{staticClass:"container__list__placeholder",attrs:{selected:"true",disabled:"disabled"}},[e._v(e._s(e.placeholder))]),e._l(e.lista,(function(t,n){return a("option",{key:n,staticClass:"container__list__option",domProps:{value:t}},[e._v(" "+e._s(t))])}))],2)])},r=[],i={name:"ListaDesplegable",data:function(){return{}},props:{value:String,nombreLista:String,nombre:String,lista:Array,placeholder:String}},s=i,o=(a("6d61"),a("2877")),c=Object(o["a"])(s,n,r,!1,null,"4d72f0cc",null);t["a"]=c.exports},a8d6:function(e,t,a){},ab13:function(e,t,a){var n=a("b622"),r=n("match");e.exports=function(e){var t=/./;try{"/./"[e](t)}catch(a){try{return t[r]=!1,"/./"[e](t)}catch(n){}}return!1}},c53e:function(e,t,a){"use strict";a("cc68")},cc68:function(e,t,a){},d469:function(e,t,a){}}]);
//# sourceMappingURL=chunk-0682c578.4bc6baa7.js.map