(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-48a57c62"],{"1fb5":function(e,t,a){"use strict";a("b160")},3963:function(e,t,a){"use strict";a("4384")},4384:function(e,t,a){},"90d9":function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"register"},[a("div",{staticClass:"register_container"},[a("RegistroItem",{staticClass:"register_item"})],1)])},r=[],n=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("section",{staticClass:"reg_item"},[a("h2",{staticClass:"item_title"},[e._v("Registrar Item de Gasto")]),e._m(0),a("form",{staticClass:"form_itemreg",attrs:{autocomplete:"off"},on:{submit:function(t){return t.preventDefault(),e.submitForm(t)}}},[a("div",{staticClass:"form_section"},[a("div",{staticClass:"form_name"},[e._v("Item:")]),a("input",{directives:[{name:"model",rawName:"v-model",value:e.item.nombre_itemgasto,expression:"item.nombre_itemgasto"}],class:e.$v.item.nombre_itemgasto.$invalid?"form_check-input-error":"form_check-input",attrs:{id:"nombreItem",type:"text",maxlength:"50",required:"",placeholder:"Ingrese el nombre aquí"},domProps:{value:e.item.nombre_itemgasto},on:{input:function(t){t.target.composing||e.$set(e.item,"nombre_itemgasto",t.target.value)}}}),e.$v.item.nombre_itemgasto.required?e._e():a("div",{staticClass:"form_check-error"},[e._v(" Campo obligatorio. ")])]),a("div",{staticClass:"form_section"},[a("div",{staticClass:"form_name"},[e._v("Categoría:")]),a("div",{staticClass:"form-categ"},[a("div",{staticClass:"form-categ-gen",on:{click:e.getSpeCategories}},[a("lista-desplegable",{class:e.$v.item.categoria_general.$invalid?"form_check-input-error":"form_check-input",attrs:{nombreLista:"categoriaGeneral",lista:e.listaCatGen,placeholder:"Seleccione una categoría general",required:""},model:{value:e.item.categoria_general,callback:function(t){e.$set(e.item,"categoria_general",t)},expression:"item.categoria_general"}}),e.$v.item.categoria_general.required?e._e():a("div",{staticClass:"form_check-error"},[e._v(" Campo obligatorio. ")])],1),a("div",{staticClass:"form-categ-esp"},[a("input",{directives:[{name:"model",rawName:"v-model",value:e.item.categoria_especifica,expression:"item.categoria_especifica"}],class:e.$v.item.categoria_especifica.$invalid?"form_check-input-error":"form_check-input",attrs:{name:"categoriaItem",id:"categoriaItem",list:"categorias",maxlength:"50",required:"",placeholder:"Seleccione o ingrese una categoría específica"},domProps:{value:e.item.categoria_especifica},on:{input:function(t){t.target.composing||e.$set(e.item,"categoria_especifica",t.target.value)}}}),e.$v.item.categoria_especifica.required?e._e():a("div",{staticClass:"form_check-error"},[e._v(" Campo obligatorio. ")]),a("datalist",{attrs:{id:"categorias"}},e._l(e.listaCategorias,(function(t,i){return a("option",{key:i,domProps:{value:t}},[e._v(e._s(t))])})),0)])])]),a("div",{staticClass:"form_section"},[a("div",{staticClass:"form_name"},[e._v("Descripción:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.item.descripcion_item,expression:"item.descripcion_item"}],class:e.$v.item.descripcion_item.$invalid?"form_check-input-error":"form_check-input",attrs:{name:"descripcionItem",cols:"50",rows:"10",maxlength:"1000",required:"",placeholder:"Ingrese una descripción del ítem"},domProps:{value:e.item.descripcion_item},on:{input:function(t){t.target.composing||e.$set(e.item,"descripcion_item",t.target.value)}}}),e._v(" "),e.$v.item.descripcion_item.required?e._e():a("div",{staticClass:"form_check-error"},[e._v(" Campo obligatorio. ")])]),a("div",{staticClass:"form_section"},[a("div",{staticClass:"form_name"},[e._v("Justificación:")]),a("textarea",{directives:[{name:"model",rawName:"v-model",value:e.item.justificacion,expression:"item.justificacion"}],class:e.$v.item.justificacion.$invalid?"form_check-input-error":"form_check-input",attrs:{name:"justificacionItem",cols:"50",rows:"10",maxlength:"1000",required:"",placeholder:"Ingrese la justificación del ítem"},domProps:{value:e.item.justificacion},on:{input:function(t){t.target.composing||e.$set(e.item,"justificacion",t.target.value)}}}),e._v(" "),e.$v.item.justificacion.required?e._e():a("div",{staticClass:"form_check-error"},[e._v(" Campo obligatorio. ")])]),a("div",{staticClass:"item-form-button"},[a("button",{staticClass:"form_button",class:e.$v.item.$invalid?"button-disabled":"",attrs:{disabled:e.$v.item.$invalid}},[e._v(" Crear ")])])]),a("Alert",{ref:"alert"})],1)},s=[function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("label",[a("div",{staticClass:"form_desc"},[e._v("Ingrese los datos de un nuevo item de gasto")])])}],o=a("b85c"),c=a("1da1"),m=a("5530"),l=(a("caad"),a("2532"),a("96cf"),a("b5ae")),u=a("98ab"),d=a("2f62"),g=a("961c"),p={name:"RegistroItem",computed:Object(m["a"])({},Object(d["c"])(["token"])),components:{Alert:u["a"],ListaDesplegable:g["a"]},data:function(){return{disabled:!1,item:{nombre_itemgasto:null,categoria_general:null,categoria_especifica:null,descripcion_item:"",justificacion:""},listaCategorias:[],listaUnidades:[],listaCatGen:[],listaCodGen:[]}},validations:{item:{nombre_itemgasto:{required:l["required"],maxLength:Object(l["maxLength"])(50)},categoria_especifica:{required:l["required"],maxLength:Object(l["maxLength"])(50)},categoria_general:{required:l["required"]},descripcion_item:{required:l["required"],maxLength:Object(l["maxLength"])(1e3)},justificacion:{required:l["required"],maxLength:Object(l["maxLength"])(1e3)}}},methods:{getGenCategories:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,i,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("generalCategory",{headers:{authorization:e.token}});case 2:a=t.sent.data,i=Object(o["a"])(a);try{for(i.s();!(r=i.n()).done;)n=r.value,e.listaCatGen.push(n.nombre_categoriageneral),e.listaCodGen.push(n.cod_categoriageneral)}catch(s){i.e(s)}finally{i.f()}e.getSpeCategories();case 6:case"end":return t.stop()}}),t)})))()},getSpeCategories:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,i,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.listaCategorias=[],t.next=3,e.$http.get("specificCategory",{headers:{authorization:e.token}});case 3:a=t.sent.data,console.log(e.listaCodGen[e.listaCatGen.indexOf(e.item.categoria_general)]),i=Object(o["a"])(a);try{for(i.s();!(r=i.n()).done;)n=r.value,n.cod_categoriageneral==e.listaCodGen[e.listaCatGen.indexOf(e.item.categoria_general)]&&e.listaCategorias.push(n.nombre_categoriaespecifica)}catch(s){i.e(s)}finally{i.f()}case 7:case"end":return t.stop()}}),t)})))()},submitForm:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(t.prev=0,e.$v.item.$invalid){t.next=12;break}return t.next=4,e.manageCat();case 4:return t.next=6,e.sendItemData();case 6:return t.next=8,e.sendItemUnitData();case 8:e.alert("success","Item creado exitosamente"),window.setInterval(window.location.reload(),1e4),t.next=13;break;case 12:e.alert("warning","Rellene todos los datos correctamente");case 13:t.next=18;break;case 15:t.prev=15,t.t0=t["catch"](0),e.alert("warning",t.t0);case 18:case"end":return t.stop()}}),t,null,[[0,15]])})))()},sendItemData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.post("expenseItem",{nombre_itemgasto:e.item.nombre_itemgasto,nombre_categoriaespecifica:e.item.categoria_especifica,descripcion_item:e.item.descripcion_item,justificacion:e.item.justificacion},{headers:{authorization:e.token}});case 3:t.next=8;break;case 5:throw t.prev=5,t.t0=t["catch"](0),new Error("Este ítem ya está registrado");case 8:case"end":return t.stop()}}),t,null,[[0,5]])})))()},getSpendingUnits:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,i,r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.$http.get("spendingUnit?type=name&departamento=".concat(localStorage.getItem("depto")),{headers:{authorization:e.token}});case 2:a=t.sent.data.datos,i=Object(o["a"])(a);try{for(i.s();!(r=i.n()).done;)n=r.value,e.listaUnidades.push(n.nombre_unidadgasto)}catch(s){i.e(s)}finally{i.f()}case 5:case"end":return t.stop()}}),t)})))()},sendItemUnitData:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,i,r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:t.prev=0,a=Object(o["a"])(e.listaUnidades),t.prev=2,a.s();case 4:if((i=a.n()).done){t.next=10;break}return r=i.value,t.next=8,e.$http.post("itemsPerUnit",{nombre_unidadgasto:r,nombre_itemgasto:e.item.nombre_itemgasto,activo_item:!0},{headers:{authorization:e.token}});case 8:t.next=4;break;case 10:t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](2),a.e(t.t0);case 15:return t.prev=15,a.f(),t.finish(15);case 18:t.next=23;break;case 20:throw t.prev=20,t.t1=t["catch"](0),new Error("Unidad inválida");case 23:case"end":return t.stop()}}),t,null,[[0,20],[2,12,15,18]])})))()},manageCat:function(){var e=this;return Object(c["a"])(regeneratorRuntime.mark((function t(){var a,i,r,n,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$http.get("specificCategory",{headers:{authorization:e.token}});case 3:a=t.sent.data,i=[],r=Object(o["a"])(a);try{for(r.s();!(n=r.n()).done;)s=n.value,i.push(s.nombre_categoriaespecifica)}catch(c){r.e(c)}finally{r.f()}if(i.includes(e.item.categoria_especifica)){t.next=10;break}return t.next=10,e.$http.post("specificCategory",{cod_categoriageneral:e.listaCodGen[e.listaCatGen.indexOf(e.item.categoria_general)],nombre_categoriaespecifica:e.item.categoria_especifica},{headers:{authorization:e.token}});case 10:t.next=15;break;case 12:throw t.prev=12,t.t0=t["catch"](0),new Error("Categoría Inválida");case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},alert:function(e,t){this.$refs.alert.showAlert(e,t)}},mounted:function(){this.getGenCategories(),this.getSpendingUnits();var e=[32,48,49,50,51,52,53,54,55,56,57,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,193,201,205,209,211,218,225,233,237,241,243,250],t=document.getElementById("nombreItem");t.addEventListener("keypress",(function(t){var a=t.charCode;if(0!=a){var i=e.includes(a);i||t.preventDefault()}}),!1);var a=[32,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,193,201,205,209,211,218,225,233,237,241,243,250],i=document.getElementById("categoriaItem");i.addEventListener("keypress",(function(e){var t=e.charCode;if(0!=t){var i=a.includes(t);i||e.preventDefault()}}),!1)}},f=p,v=(a("1fb5"),a("2877")),_=Object(v["a"])(f,n,s,!1,null,"1ab9c2ca",null),h=_.exports,b={name:"RegistroItemGasto",components:{RegistroItem:h}},C=b,x=(a("3963"),Object(v["a"])(C,i,r,!1,null,"77988499",null));t["default"]=x.exports},b160:function(e,t,a){}}]);
//# sourceMappingURL=chunk-48a57c62.f62bcf8a.js.map