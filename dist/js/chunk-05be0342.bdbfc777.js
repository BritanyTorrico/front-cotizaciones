(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-05be0342"],{"0d89":function(t,e,a){"use strict";a("396e")},"0f22":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"review"},[a("div",{staticClass:"review-container"},[a("Inbox",{staticClass:"review-inbox"})],1)])},r=[],s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"inbox"},[a("div",{staticClass:"inbox-container"},[a("div",{staticClass:"inbox-cards"},[a("div",{staticClass:"card-side"},t._l(t.inboxData,(function(e,n){return a("div",{key:n,staticClass:"card-index"},[a("div",{staticClass:"single-card-container ",class:t.selectedRequest.name==e.nombre_solicitud?"selected-card":"",on:{click:function(e){return t.showRequest(n)}}},[a("Card",{attrs:{name:e.nombre_solicitud,date:e.fecha_solicitud,author:e.usuario_solicitante,description:e.detalle_solicitud}})],1)])})),0)]),a("div",{staticClass:"inbox-details"},[""===t.selectedRequest.name?a("div"):a("div",[a("Details",{attrs:{request:t.selectedRequest}})],1)])])])},i=[],o=a("1da1"),c=a("5530"),u=(a("b0c0"),a("a4d3"),a("e01a"),a("96cf"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"card-container"},[a("div",{staticClass:"card-head"},[a("h3",[t._v(t._s(t.name))]),a("div",{staticClass:"card-date"},[t._v(t._s(t.date))])]),a("div",{staticClass:"card-author"},[t._v(t._s(t.author))]),a("div",{staticClass:"card-description"},[t._v(t._s(t.description))])])}),l=[],d={name:"Card",data:function(){return{}},props:{name:String,date:String,author:String,description:String}},f=d,p=(a("0d89"),a("2877")),h=Object(p["a"])(f,u,l,!1,null,"0cf9a2aa",null),m=h.exports,v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"single-request-details"},[a("div",{staticClass:"head-part"},[a("div",{staticClass:"head-top"},[a("h2",[t._v(t._s(t.request.name))]),a("div",{staticClass:"time"},[t._v(t._s(t.request.date))])]),a("div",{staticClass:"head-subject"},[t._v(t._s(t.request.author))])]),a("div",{staticClass:"body-part"},[a("h5",[t._v("Justificación:")]),a("p",[t._v(t._s(t.request.description))]),a("div",{staticClass:"money"},[a("h5",[t._v("Presupuesto:")]),t._v(" Bs. "+t._s(t.request.budget)+" ")])]),a("h5",[t._v("Items:")]),a("div",{staticClass:"items"},[a("table",{staticClass:"items-list"},[t._m(0),a("tbody",t._l(t.request.itemList,(function(e,n){return a("tr",{key:n},[a("td",[t._v(t._s(e.cantidad_solicitud))]),a("td",[t._v(t._s(e.unidad_solicitud))]),a("td",[t._v(t._s(e.detalle_solicitud))])])})),0)])]),a("div",{staticClass:"response"},[a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}],staticClass:"accept-button",on:{click:function(e){return t.assert()}}},[t._v("Aceptar")]),a("b-button",{directives:[{name:"b-modal",rawName:"v-b-modal.modal-prevent-closing",modifiers:{"modal-prevent-closing":!0}}],staticClass:"reject-button",on:{click:function(e){return t.deny()}}},[t._v("Rechazar")]),a("b-modal",{ref:"modal",attrs:{id:"modal-prevent-closing",title:"Justificación"},on:{show:t.resetModal,hidden:t.resetModal,ok:t.handleOk}},[a("form",{ref:"form",on:{submit:function(e){return e.stopPropagation(),e.preventDefault(),t.handleSubmit(e)}}},[a("b-form-group",{attrs:{"invalid-feedback":"Justifique su respuesta",state:t.resState}},[a("b-form-textarea",{attrs:{id:"response-textarea",placeholder:"Ingrese su justificación",cols:"50",rows:"10",maxlength:"1000",state:t.resState},model:{value:t.response,callback:function(e){t.response=e},expression:"response"}})],1)],1),a("Alert",{ref:"alert"})],1)],1)])},b=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("thead",[a("tr",[a("th",[t._v("Cantidad")]),a("th",[t._v("Item")]),a("th",[t._v("Detalle")])])])}],_=(a("a9e3"),a("98ab")),g=a("2f62"),x={name:"Details",computed:Object(c["a"])({},Object(g["c"])(["token"])),components:{Alert:_["a"]},data:function(){return{valid:null,response:"",resState:null,status:""}},props:{request:{cod:Number,name:String,date:String,author:String,description:String,budget:Number,itemList:Array}},methods:{checkFormValidity:function(){var t=this.$refs.form.checkValidity();return this.resState=t,t},resetModal:function(){this.response="",this.resState=null},handleOk:function(t){t.preventDefault(),this.handleSubmit()},handleSubmit:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(e.prev=0,t.checkFormValidity()){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,t.sendData();case 5:t.alert("success","Informe enviado"),e.next=12;break;case 8:return e.prev=8,e.t0=e["catch"](0),t.alert("warning",e.t0),e.abrupt("return");case 12:t.$nextTick((function(){t.$bvModal.hide("modal-prevent-closing")}));case 13:case"end":return e.stop()}}),e,null,[[0,8]])})))()},sendData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.prev=0,console.log("cod: "+t.request.cod),console.log("nombre: Informe "+t.request.name),console.log("just: "+t.response),console.log("acept: "+t.valid),e.next=7,t.$http.post("report?type=codigo",{cod_solicitud:t.request.cod,titulo_informe:"Informe "+t.request.name,justificacion_informe:t.response,aceptacion:t.valid},{headers:{authorization:t.token}});case 7:return e.next=9,t.$http.put("request/".concat(t.request.cod,"?type=State"),{estado_solicitud:t.status},{headers:{authorization:t.token}});case 9:window.location.reload(),e.next=15;break;case 12:throw e.prev=12,e.t0=e["catch"](0),new Error("Esta solicitud ya fue revisada");case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))()},assert:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.valid=!0,t.status="ACEPTADA";case 2:case"end":return e.stop()}}),e)})))()},deny:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t.valid=!1,t.status="RECHAZADA";case 2:case"end":return e.stop()}}),e)})))()},alert:function(t,e){this.$refs.alert.showAlert(t,e)}}},w=x,C=(a("4d76"),Object(p["a"])(w,v,b,!1,null,"2c9650fd",null)),k=C.exports,y={name:"Inbox",computed:Object(c["a"])({},Object(g["c"])(["token"])),components:{Details:k,Card:m},data:function(){return{inboxData:[],items:[],selectedRequest:{cod:null,name:"",date:"",author:"",description:"",budget:null,itemList:[]}}},methods:{getData:function(){var t=this;return Object(o["a"])(regeneratorRuntime.mark((function e(){var a,n,r,s,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("request?type=criteria&status=ABIERTA&from=depto&nombre=".concat(localStorage.getItem("depto")),{headers:{authorization:t.token}});case 2:a=e.sent.data,n=0;case 4:if(!(n<a.length)){e.next=17;break}return t.inboxData.push(a[n]),t.inboxData[n].fecha_solicitud=t.inboxData[n].fecha_solicitud.substr(5,t.inboxData[n].fecha_solicitud.indexOf("T")),t.inboxData[n].fecha_solicitud=t.inboxData[n].fecha_solicitud.substr(0,t.inboxData[n].fecha_solicitud.indexOf("T")),e.next=10,t.$http.get("itemsPerRequest?searchby=solicitud&typeinput=nombre&inputdata=".concat(t.inboxData[n].nombre_solicitud),{headers:{authorization:t.token}});case 10:for(r=e.sent.data.datos,s=[],i=0;i<r.length;i++)s.push(r[i]);t.items.push(s);case 14:n++,e.next=4;break;case 17:case"end":return e.stop()}}),e)})))()},showRequest:function(t){var e=this;return Object(o["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.selectedRequest.cod=e.inboxData[t].cod_solicitud,e.selectedRequest.name=e.inboxData[t].nombre_solicitud,e.selectedRequest.date=e.inboxData[t].fecha_solicitud,e.selectedRequest.author=e.inboxData[t].usuario_solicitante,e.selectedRequest.description=e.inboxData[t].detalle_solicitud,e.selectedRequest.budget=e.inboxData[t].estimado_solicitud,e.selectedRequest.itemList=e.items[t];case 7:case"end":return a.stop()}}),a)})))()}},mounted:function(){this.getData()}},R=y,S=(a("3edf"),Object(p["a"])(R,s,i,!1,null,"6554aa5a",null)),q=S.exports,I={components:{Inbox:q},data:function(){return{}}},A=I,D=(a("16e4"),Object(p["a"])(A,n,r,!1,null,"e1a60a28",null));e["default"]=D.exports},"16e4":function(t,e,a){"use strict";a("40b0")},"396e":function(t,e,a){},"3edf":function(t,e,a){"use strict";a("f08d")},"40b0":function(t,e,a){},"4d76":function(t,e,a){"use strict";a("f1a6")},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var n=a("1d80"),r=a("5899"),s="["+r+"]",i=RegExp("^"+s+s+"*"),o=RegExp(s+s+"*$"),c=function(t){return function(e){var a=String(n(e));return 1&t&&(a=a.replace(i,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},7156:function(t,e,a){var n=a("861d"),r=a("d2bb");t.exports=function(t,e,a){var s,i;return r&&"function"==typeof(s=e.constructor)&&s!==a&&n(i=s.prototype)&&i!==a.prototype&&r(t,i),t}},"98ab":function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return t.show?a("div",{staticClass:"alert",class:t.type},[a("span",{staticClass:"closebtn",on:{click:function(e){return t.hideAlert()}}},[t._v("×")]),t._v(" "+t._s(t.message)+" ")]):t._e()},r=[],s={name:"Alert",data:function(){return{show:!1,type:"",message:""}},methods:{showAlert:function(t,e){this.type=t,this.message=e,this.show=!0},hideAlert:function(){this.show=!1}}},i=s,o=(a("c9c4"),a("2877")),c=Object(o["a"])(i,n,r,!1,null,"76d0477a",null);e["a"]=c.exports},"9d45":function(t,e,a){},a9e3:function(t,e,a){"use strict";var n=a("83ab"),r=a("da84"),s=a("94ca"),i=a("6eeb"),o=a("5135"),c=a("c6b6"),u=a("7156"),l=a("c04e"),d=a("d039"),f=a("7c73"),p=a("241c").f,h=a("06cf").f,m=a("9bf2").f,v=a("58a8").trim,b="Number",_=r[b],g=_.prototype,x=c(f(g))==b,w=function(t){var e,a,n,r,s,i,o,c,u=l(t,!1);if("string"==typeof u&&u.length>2)if(u=v(u),e=u.charCodeAt(0),43===e||45===e){if(a=u.charCodeAt(2),88===a||120===a)return NaN}else if(48===e){switch(u.charCodeAt(1)){case 66:case 98:n=2,r=49;break;case 79:case 111:n=8,r=55;break;default:return+u}for(s=u.slice(2),i=s.length,o=0;o<i;o++)if(c=s.charCodeAt(o),c<48||c>r)return NaN;return parseInt(s,n)}return+u};if(s(b,!_(" 0o1")||!_("0b1")||_("+0x1"))){for(var C,k=function(t){var e=arguments.length<1?0:t,a=this;return a instanceof k&&(x?d((function(){g.valueOf.call(a)})):c(a)!=b)?u(new _(w(e)),a,k):w(e)},y=n?p(_):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),R=0;y.length>R;R++)o(_,C=y[R])&&!o(k,C)&&m(k,C,h(_,C));k.prototype=g,g.constructor=k,i(r,b,k)}},b0c0:function(t,e,a){var n=a("83ab"),r=a("9bf2").f,s=Function.prototype,i=s.toString,o=/^\s*function ([^ (]*)/,c="name";n&&!(c in s)&&r(s,c,{configurable:!0,get:function(){try{return i.call(this).match(o)[1]}catch(t){return""}}})},c9c4:function(t,e,a){"use strict";a("9d45")},e01a:function(t,e,a){"use strict";var n=a("23e7"),r=a("83ab"),s=a("da84"),i=a("5135"),o=a("861d"),c=a("9bf2").f,u=a("e893"),l=s.Symbol;if(r&&"function"==typeof l&&(!("description"in l.prototype)||void 0!==l().description)){var d={},f=function(){var t=arguments.length<1||void 0===arguments[0]?void 0:String(arguments[0]),e=this instanceof f?new l(t):void 0===t?l():l(t);return""===t&&(d[e]=!0),e};u(f,l);var p=f.prototype=l.prototype;p.constructor=f;var h=p.toString,m="Symbol(test)"==String(l("test")),v=/^Symbol\((.*)\)[^)]+$/;c(p,"description",{configurable:!0,get:function(){var t=o(this)?this.valueOf():this,e=h.call(t);if(i(d,t))return"";var a=m?e.slice(7,-1):e.replace(v,"$1");return""===a?void 0:a}}),n({global:!0,forced:!0},{Symbol:f})}},f08d:function(t,e,a){},f1a6:function(t,e,a){}}]);
//# sourceMappingURL=chunk-05be0342.bdbfc777.js.map